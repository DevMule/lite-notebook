!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(module,__webpack_exports__,__webpack_require__){"use strict";async function parse(ch,element){ch.flags.indexOf("async")>=0?await eval(ch.content):eval(ch.content)}const js_parser={types:["js","javascript","java-script"],parse:parse};__webpack_exports__.a=js_parser},function(e,t,n){"use strict";n.r(t);class i{constructor(){this.chunks=[],this.tail=[],this.current=null,this.line=0,this.index=0}commit(){const e=this.current;e.commit(),this.chunks.push(e),this.current=null}addLines(e){this.current.addLines(e),this.line+=e.length;for(const t of e)this.index+=t.length+1}}class r{constructor(e,t,n,i){this.type=e,this.flags=t,this.index=n,this.startLine=i,this.endLine=i,this.content="",this.lines=[]}addLines(e){this.lines.push(...e),this.endLine+=e.length}commit(){this.content=this.lines.join("\n"),this.lines=[]}}function s(e,t,n=!0){const i=t.split("\n");let s=[];return i.forEach((function(t){if("%%"===t.slice(0,2)){s.length&&!e.current&&(e.current=new r("",[],0,0)),e.current&&(e.addLines(s),e.commit(),s=[]);let n=0;for(;"%"===t[n];)n+=1;const i=t.slice(n).split(/[ \t]+/).filter(e=>""!==e);e.current=new r(i[0],i.slice(1),e.index,e.line),e.index+=t.length+1}else s.push(t)})),n?(e.addLines(s),e.commit(),e.tail=[]):e.tail.push(...s),e}const o={};o.ParserState=i,o.Chunk=r,o.parseLines=s,o.parse=function(e){return s(new i,e,!0).chunks};var a=o;var c={types:["css"],parse:async function(e,t){let n=document.createElement("style");n.appendChild(document.createTextNode(e.content)),t.appendChild(n)}},l=n(0);async function d(e){let t=e.indexOf(":");if(t<0)return;let n=e.slice(0,t).trim(),i=e.slice(t+1,e.length).trim();if(n&&i)switch(n){case"js":await async function(e){return new Promise((t,n)=>{let i=document.createElement("script");document.head.appendChild(i),i.src=e,i.async=!1,i.onload=t,i.onerror=n})}(i);break;case"py":await async function(e){return await languagePluginLoader,pyodide.loadPackage([e])}(i);break;case"text":await async function(e){let t=e.indexOf("=");if(t<0)return;let n=e.slice(0,t).trim(),i=e.slice(t+1,e.length).trim();if(i.startsWith("http")||(i=lite_notebook.root+"/"+i),n&&i){let e=await fetch(i);self[n]=await e.text()}}(i)}}var u={types:["fetch"],parse:async function(e,t){let n=e.content.split("\n");for(let e=0;e<n.length;e++){let t=n[e].trim();t&&await d(t)}}};let p=null;var h={types:["md"],parse:async function(e,t){if(!p){p=new marked.Renderer;const e=p.link.bind(p),t=p.image.bind(p);p.link=(t,n,i)=>(t.startsWith("http")||(t=lite_notebook.root+"/"+t),e(t,n,i)),p.image=(e,n,i)=>(e.startsWith("http")||(e=lite_notebook.root+"/"+e),t(e,n,i))}let n=document.createElement("div");n.innerHTML=marked(e.content,{renderer:p}),n.classList&&n.classList.add("user-markdown"),t.appendChild(n)}};var f={types:["editor","code","ace"],parse:async function(e,t){let n=document.createElement("div");n.innerText=e.content;let i=null;for(let t=0;t<e.flags.length;t++){let r=e.flags[t];if(r.startsWith("id")){let e=r.indexOf("=");if(e<0)continue;i=n.id=r.slice(e+1,r.length).trim()}}t.appendChild(n);const r=ace.edit(i);r.getSession().setMode("ace/mode/python"),r.setOptions({maxLines:60,minLines:20})}};const m=[c,l.a,u,h,f];const y={v:"0.0.5",root:"",hierarchy:{},screen:null,workerURL:"dist/worker.js",elements:{code_output:function(){let e=document.createElement("div");e.classList.add("code-output");let t=document.createElement("div");t.classList.add("code-btn-container"),e.appendChild(t);let n=document.createElement("div");n.classList.add("code-btn","code-btn-play"),t.appendChild(n);let i=document.createElement("div");i.classList.add("code-btn","code-btn-clear"),t.appendChild(i);let r=document.createElement("div");return r.classList.add("code-output-text"),e.appendChild(r),n.addEventListener("click",()=>e.dispatchEvent(new Event("onPlay"))),i.addEventListener("click",()=>e.dispatchEvent(new Event("onClear"))),e.output=r,e.pre_codes=[],e.after_codes=[],e.before_launch=()=>null,e.attachEditor=t=>{let i=null;e.addEventListener("onPlay",()=>{if(i)n.classList.remove("code-btn-stop"),n.classList.add("code-btn-play");else{e.before_launch instanceof Function&&e.before_launch(),i=lite_notebook.pyWorker,i.addEventListener("print",e=>{let t=e.message.join(" ");t=t.replace(/\\n/g,"<br>")+"\n",r.innerText+=t,r.scrollTop=r.scrollHeight});let s=[...e.pre_codes,t.getValue(),...e.after_codes].join("\n\n");i.run(s,e=>{r.innerText+="process finished\n",r.scrollTop=r.scrollHeight,i.terminate(),i=null,n.classList.remove("code-btn-stop"),n.classList.add("code-btn-play")},e=>{r.innerText+=e.replace(/\\n/g,"<br>")+"\n",r.scrollTop=r.scrollHeight,i.terminate(),i=null,n.classList.remove("code-btn-stop"),n.classList.add("code-btn-play")}),n.classList.remove("code-btn-play"),n.classList.add("code-btn-stop"),r.innerText+="run...\n",r.scrollTop=r.scrollHeight}}),e.addEventListener("onClear",()=>r.innerText="")},e}},load_hierarchy:async function(e){let t=await fetch(e),n=await t.text();if(!n)throw new Error("Error. no hierarchy file!");{y.hierarchy=JSON.parse(n);let e=new URL(window.location.href).searchParams.get("page")||"notebooks";await async function(){let e=document.getElementById("menu");e.innerHTML="";let t=(n,i,r)=>{let s=document.createElement("p");s.style.paddingLeft=12*i+"px",s.innerText=n.name,s.classList.add("menu-elem"),e.appendChild(s);let o=r+n.src;s.onclick=()=>b(o),s.setAttribute("path",o);for(let e=0;e<n.children.length;e++)t(n.children[e],i+1,o+"/")};t(y.hierarchy,1,"")}(),await b(e)}},get pyWorker(){return e=y.workerURL,{worker:new Worker(e),listeners:[],context:{variables:{lite_notebook:lite_notebook.v},events:["print"]},addVariable:function(e,t){this.context.variables[e]=t},addFunction:function(e){this.context.events.push(e)},addEventListener:function(e,t){this.listeners.push({type:e,listener:t})},run:function(e,t,n){this.worker.onerror=n,this.worker.onmessage=e=>{const{error:i}=e.data;for(let t=0;t<this.listeners.length;t++)if(e.data.type===this.listeners[t].type)try{this.listeners[t].listener(e.data)}catch(e){console.error(e.message)}"end"===e.data.type&&t(e.data),i&&n(i)},this.worker.postMessage({context:this.context,python:e})},asyncRun:function(e,t){return new Promise((n,i)=>this.run(e,t,n,i))},terminate(){this.worker.terminate()}};var e}};async function b(e){let{node:t,root:n}=await async function(e){let t=e.split("/"),n=y.hierarchy,i=[n.src],r=0;for(;n.src===t[r]&&(r++,r<t.length);){let e=t[r],s=n.children.find(t=>t.src===e);if(!s)break;n=s,i.push(n.src)}return{node:n,root:i.join("/")}}(e);if(t){let i=document.getElementById("menu").getElementsByClassName("menu-elem");for(let t=0;t<i.length;t++){let n=i[t];n.getAttribute("path")===e?n.classList.add("active"):n.classList.remove("active")}document.title=t.name;const r=window.location.href.split("?");window.history.pushState(null,null,r[0]+"?page="+n),y.root=n,y.screen=document.getElementById("screen"),y.screen.innerHTML="";let s=await fetch(n+"/notebook"),o=await s.text();await async function(e,t){let n=a.parse(e);for(let e=0;e<n.length;e++){let i=n[e];if(!i.type)continue;let r=i.type.trim().toLowerCase(),s=m.find(e=>e.types.indexOf(r)>=0);s&&await s.parse(i,t)}}(o,y.screen),await MathJax.typesetPromise()}else await b("notebooks")}window.lite_notebook=y}]);